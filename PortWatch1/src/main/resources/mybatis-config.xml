<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration
    PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>
    
    <!-- ========================================
         MyBatis 전역 설정
         ======================================== -->
    <settings>
        <!-- 캐멀 케이스 자동 매핑 (예: member_id → memberId) -->
        <setting name="mapUnderscoreToCamelCase" value="true"/>
        
        <!-- NULL 값 허용 (JDBC 타입 지정 없이) -->
        <setting name="jdbcTypeForNull" value="NULL"/>
        
        <!-- 로그 구현체 지정 (SLF4J 사용) -->
        <setting name="logImpl" value="SLF4J"/>
        
        <!-- 지연 로딩 활성화 -->
        <setting name="lazyLoadingEnabled" value="true"/>
        
        <!-- 공격적인 지연 로딩 비활성화 -->
        <setting name="aggressiveLazyLoading" value="false"/>
        
        <!-- 캐시 활성화 -->
        <setting name="cacheEnabled" value="true"/>
        
        <!-- 자동 생성 키 사용 -->
        <setting name="useGeneratedKeys" value="true"/>
    </settings>
    
    <!-- ========================================
         ✅ 중요: <mappers> 섹션 제거!
         
         이유:
         - root-context.xml의 mapperLocations가 이미 모든 Mapper를 로드합니다
         - 여기서 직접 등록하면 typeAliases보다 먼저 로드되어 에러 발생!
         
         root-context.xml 설정:
         <property name="mapperLocations" value="classpath:mappers/*.xml"/>
         <property name="typeAliasesPackage" value="com.portwatch.domain"/>
         ======================================== -->
      
    <!-- ✅ TypeAliases 설정 (필수!) -->
    <typeAliases>
        <!-- 
            패키지 스캔 방식:
            - com.portwatch.domain 패키지의 모든 클래스를 자동으로 alias 등록
            - MemberVO → "MemberVO" alias 자동 생성
            - StockVO → "StockVO" alias 자동 생성
            - 등등...
        -->
        <package name="com.portwatch.domain"/>
    </typeAliases>
    
    <!--  개별 등록 방식 (선택):   -->
        
        <typeAliases>
            <typeAlias type="com.portwatch.domain.MemberVO" alias="MemberVO"/>
            <typeAlias type="com.portwatch.domain.StockVO" alias="StockVO"/>
            <typeAlias type="com.portwatch.domain.PortfolioVO" alias="PortfolioVO"/>
            <typeAlias type="com.portwatch.domain.NewsVO" alias="NewsVO"/>
            <typeAlias type="com.portwatch.domain.WatchlistVO" alias="WatchlistVO"/>
        </typeAliases>
 
   
        <!-- ✅ 추가 설정 (선택) -->
    <settings>
        <!-- 카멜 케이스 자동 변환 (member_id → memberId) -->
        <setting name="mapUnderscoreToCamelCase" value="true"/>
        
        <!-- NULL 값 처리 -->
        <setting name="jdbcTypeForNull" value="NULL"/>
        
        <!-- 로그 설정 -->
        <setting name="logImpl" value="LOG4J"/>
    </settings>
    
    
</configuration>
